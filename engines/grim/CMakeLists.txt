add_library(grim STATIC)

target_sources(
  grim
  PRIVATE costume/bitmap_component.cpp
          costume/chore.cpp
          costume/colormap_component.cpp
          costume/component.cpp
          costume/head.cpp
          costume/keyframe_component.cpp
          costume/lua_var_component.cpp
          costume/main_model_component.cpp
          costume/material_component.cpp
          costume/mesh_component.cpp
          costume/model_component.cpp
          costume/sound_component.cpp
          costume/sprite_component.cpp
          costume/anim_component.cpp
          emi/costume/emianim_component.cpp
          emi/costume/emichore.cpp
          emi/costume/emihead.cpp
          emi/costume/emiluavar_component.cpp
          emi/costume/emiluacode_component.cpp
          emi/costume/emimesh_component.cpp
          emi/costume/emiskel_component.cpp
          emi/costume/emisprite_component.cpp
          emi/costume/emitexi_component.cpp
          emi/sound/aifftrack.cpp
          emi/sound/mp3track.cpp
          emi/sound/scxtrack.cpp
          emi/sound/vimatrack.cpp
          emi/sound/track.cpp
          emi/sound/emisound.cpp
          emi/sound/codecs/scx.cpp
          emi/animationemi.cpp
          emi/costumeemi.cpp
          emi/emi.cpp
          emi/modelemi.cpp
          emi/skeleton.cpp
          emi/poolsound.cpp
          emi/layer.cpp
          emi/lua_v2.cpp
          emi/lua_v2_actor.cpp
          emi/lua_v2_sound.cpp
          emi/emi_registry.cpp
          imuse/imuse.cpp
          imuse/imuse_mcmp_mgr.cpp
          imuse/imuse_music.cpp
          imuse/imuse_script.cpp
          imuse/imuse_sndmgr.cpp
          imuse/imuse_tables.cpp
          imuse/imuse_track.cpp
          lua/lapi.cpp
          lua/lauxlib.cpp
          lua/lbuffer.cpp
          lua/lbuiltin.cpp
          lua/ldo.cpp
          lua/lfunc.cpp
          lua/lgc.cpp
          lua/liolib.cpp
          lua/llex.cpp
          lua/lmathlib.cpp
          lua/lmem.cpp
          lua/lobject.cpp
          lua/lrestore.cpp
          lua/lsave.cpp
          lua/lstate.cpp
          lua/lstring.cpp
          lua/lstrlib.cpp
          lua/lstx.cpp
          lua/ltable.cpp
          lua/ltask.cpp
          lua/ltm.cpp
          lua/lundump.cpp
          lua/lvm.cpp
          lua/lzio.cpp
          movie/codecs/codec48.cpp
          movie/codecs/blocky8.cpp
          movie/codecs/blocky16.cpp
          movie/codecs/vima.cpp
          movie/codecs/smush_decoder.cpp
          movie/bink.cpp
          movie/mpeg.cpp
          movie/movie.cpp
          movie/quicktime.cpp
          movie/smush.cpp
          remastered/commentary.cpp
          remastered/hotspot.cpp
          remastered/lua_remastered.cpp
          remastered/overlay.cpp
          update/packfile.cpp
          update/mscab.cpp
          update/lang_filter.cpp
          update/update.cpp
          actor.cpp
          animation.cpp
          bitmap.cpp
          costume.cpp
          color.cpp
          colormap.cpp
          debug.cpp
          font.cpp
          gfx_base.cpp
          gfx_opengl_shaders.cpp
          gfx_opengl.cpp
          grim.cpp
          grim_controls.cpp
          inputdialog.cpp
          iris.cpp
          keyframe.cpp
          lab.cpp
          lipsync.cpp
          localize.cpp
          lua.cpp
          lua_grim_patch.cpp
          lua_v1.cpp
          lua_v1_actor.cpp
          lua_v1_graphics.cpp
          lua_v1_set.cpp
          lua_v1_sound.cpp
          lua_v1_text.cpp
          metaengine.cpp
          material.cpp
          model.cpp
          objectstate.cpp
          primitives.cpp
          patchr.cpp
          registry.cpp
          resource.cpp
          savegame.cpp
          set.cpp
          sector.cpp
          sound.cpp
          sprite.cpp
          textobject.cpp
          textsplit.cpp
          object.cpp
          debugger.cpp
          md5check.cpp
          md5checkdialog.cpp
  PRIVATE FILE_SET
          HEADERS
          FILES
          costume/bitmap_component.h
          costume/chore.h
          costume/colormap_component.h
          costume/component.h
          costume/head.h
          costume/keyframe_component.h
          costume/lua_var_component.h
          costume/main_model_component.h
          costume/material_component.h
          costume/mesh_component.h
          costume/model_component.h
          costume/sound_component.h
          costume/sprite_component.h
          costume/anim_component.h
          emi/costume/emianim_component.h
          emi/costume/emichore.h
          emi/costume/emihead.h
          emi/costume/emiluavar_component.h
          emi/costume/emiluacode_component.h
          emi/costume/emimesh_component.h
          emi/costume/emiskel_component.h
          emi/costume/emisprite_component.h
          emi/costume/emitexi_component.h
          emi/sound/aifftrack.h
          emi/sound/mp3track.h
          emi/sound/scxtrack.h
          emi/sound/vimatrack.h
          emi/sound/track.h
          emi/sound/emisound.h
          emi/sound/codecs/scx.h
          emi/animationemi.h
          emi/costumeemi.h
          emi/emi.h
          emi/modelemi.h
          emi/skeleton.h
          emi/poolsound.h
          emi/layer.h
          emi/lua_v2.h
          emi/emi_registry.h
          imuse/imuse.h
          imuse/imuse_mcmp_mgr.h
          imuse/imuse_sndmgr.h
          imuse/imuse_tables.h
          imuse/imuse_track.h
          lua/lapi.h
          lua/lauxlib.h
          lua/lbuiltin.h
          lua/ldo.h
          lua/lfunc.h
          lua/lgc.h
          lua/llex.h
          lua/lmem.h
          lua/lobject.h
          lua/lstate.h
          lua/lstring.h
          lua/lstx.h
          lua/ltable.h
          lua/ltask.h
          lua/ltm.h
          lua/lundump.h
          lua/lvm.h
          lua/lzio.h
          movie/codecs/codec48.h
          movie/codecs/blocky8.h
          movie/codecs/blocky16.h
          movie/codecs/vima.h
          movie/codecs/smush_decoder.h
          movie/bink.h
          movie/mpeg.h
          movie/movie.h
          movie/quicktime.h
          movie/smush.h
          remastered/commentary.h
          remastered/hotspot.h
          remastered/lua_remastered.h
          remastered/overlay.h
          update/packfile.h
          update/mscab.h
          update/lang_filter.h
          update/update.h
          actor.h
          animation.h
          bitmap.h
          costume.h
          color.h
          colormap.h
          debug.h
          font.h
          gfx_base.h
          gfx_opengl_shaders.h
          gfx_opengl.h
          grim.h
          inputdialog.h
          iris.h
          keyframe.h
          lab.h
          lipsync.h
          localize.h
          lua.h
          lua_v1.h
          material.h
          model.h
          objectstate.h
          primitives.h
          patchr.h
          registry.h
          resource.h
          savegame.h
          set.h
          sector.h
          sound.h
          sprite.h
          textobject.h
          textsplit.h
          object.h
          debugger.h
          md5check.h
          md5checkdialog.h
)

if(USE_ARM_SMUSH_ASM)
  target_sources(grim PRIVATE movie/codecs/blocky8ARM.cpp)

endif()

if(USE_TINYGL)
  target_sources(
    grim
    PRIVATE gfx_tinygl.cpp
    PRIVATE FILE_SET
            HEADERS
            FILES
            gfx_tinygl.h
  )

endif()

add_library(grim_detection)

target_sources(grim_detection PRIVATE detection.cpp)
