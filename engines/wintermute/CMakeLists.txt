add_library(wintermute STATIC)

target_sources(
  wintermute
  PRIVATE ad/ad_actor.cpp
          ad/ad_entity.cpp
          ad/ad_game.cpp
          ad/ad_inventory.cpp
          ad/ad_inventory_box.cpp
          ad/ad_item.cpp
          ad/ad_layer.cpp
          ad/ad_node_state.cpp
          ad/ad_object.cpp
          ad/ad_path.cpp
          ad/ad_path_point.cpp
          ad/ad_region.cpp
          ad/ad_response.cpp
          ad/ad_response_box.cpp
          ad/ad_response_context.cpp
          ad/ad_rot_level.cpp
          ad/ad_scale_level.cpp
          ad/ad_scene.cpp
          ad/ad_scene_node.cpp
          ad/ad_scene_state.cpp
          ad/ad_sentence.cpp
          ad/ad_sprite_set.cpp
          ad/ad_talk_def.cpp
          ad/ad_talk_holder.cpp
          ad/ad_talk_node.cpp
          ad/ad_waypoint_group.cpp
          base/scriptables/debuggable/debuggable_script.cpp
          base/scriptables/debuggable/debuggable_script_engine.cpp
          base/scriptables/script.cpp
          base/scriptables/script_engine.cpp
          base/scriptables/script_stack.cpp
          base/scriptables/script_value.cpp
          base/scriptables/script_ext_array.cpp
          base/scriptables/script_ext_date.cpp
          base/scriptables/script_ext_directory.cpp
          base/scriptables/script_ext_file.cpp
          base/scriptables/script_ext_math.cpp
          base/scriptables/script_ext_object.cpp
          base/scriptables/script_ext_mem_buffer.cpp
          base/scriptables/script_ext_string.cpp
          base/file/base_disk_file.cpp
          base/file/base_file_entry.cpp
          base/file/base_package.cpp
          base/file/base_save_thumb_file.cpp
          base/file/base_savefile_manager_file.cpp
          base/font/base_font_bitmap.cpp
          base/font/base_font_truetype.cpp
          base/font/base_font.cpp
          base/font/base_font_storage.cpp
          base/gfx/base_image.cpp
          base/gfx/base_renderer.cpp
          base/gfx/base_surface.cpp
          base/gfx/osystem/base_surface_osystem.cpp
          base/gfx/osystem/base_render_osystem.cpp
          base/gfx/osystem/render_ticket.cpp
          base/gfx/xmath.cpp
          base/particles/part_particle.cpp
          base/particles/part_emitter.cpp
          base/particles/part_force.cpp
          base/sound/base_sound.cpp
          base/sound/base_sound_buffer.cpp
          base/sound/base_sound_manager.cpp
          base/base.cpp
          base/base_access_mgr.cpp
          base/base_active_rect.cpp
          base/base_dynamic_buffer.cpp
          base/base_engine.cpp
          base/base_fader.cpp
          base/base_file_manager.cpp
          base/base_frame.cpp
          base/base_game.cpp
          base/base_keyboard_state.cpp
          base/base_named_object.cpp
          base/base_object.cpp
          base/base_parser.cpp
          base/base_persistence_manager.cpp
          base/base_point.cpp
          base/base_quick_msg.cpp
          base/base_region.cpp
          base/base_scriptable.cpp
          base/base_script_holder.cpp
          base/base_sprite.cpp
          base/base_string_table.cpp
          base/base_sub_frame.cpp
          base/base_surface_storage.cpp
          base/base_transition_manager.cpp
          base/base_viewport.cpp
          base/save_thumb_helper.cpp
          ext/dll_dlltest.cpp
          ext/dll_geturl.cpp
          ext/dll_httpconnect.cpp
          ext/dll_img.cpp
          ext/dll_installutil.cpp
          ext/dll_kernel32.cpp
          ext/dll_protect.cpp
          ext/dll_routine.cpp
          ext/dll_shell32.cpp
          ext/dll_tools.cpp
          ext/scene_achievements.cpp
          ext/wme_3fstatistics.cpp
          ext/wme_commandlinehelper.cpp
          ext/wme_displacement.cpp
          ext/wme_galaxy.cpp
          ext/wme_steam.cpp
          ext/wme_windowmode.cpp
          debugger/breakpoint.cpp
          debugger/debugger_controller.cpp
          debugger/error.cpp
          debugger/listing_providers/blank_listing.cpp
          debugger/listing_providers/blank_listing_provider.cpp
          debugger/listing_providers/basic_source_listing_provider.cpp
          debugger/listing_providers/cached_source_listing_provider.cpp
          debugger/listing_providers/source_listing.cpp
          debugger/listing.cpp
          debugger/script_monitor.cpp
          debugger/watch.cpp
          debugger/watch_instance.cpp
          math/math_util.cpp
          metaengine.cpp
          platform_osystem.cpp
          system/sys_class.cpp
          system/sys_class_registry.cpp
          system/sys_instance.cpp
          ui/ui_button.cpp
          ui/ui_edit.cpp
          ui/ui_entity.cpp
          ui/ui_object.cpp
          ui/ui_text.cpp
          ui/ui_tiled_image.cpp
          ui/ui_window.cpp
          utils/crc.cpp
          utils/path_util.cpp
          utils/string_util.cpp
          utils/utils.cpp
          video/subtitle_card.cpp
          video/video_player.cpp
          video/video_subtitler.cpp
          video/video_theora_player.cpp
          debugger.cpp
          wintermute.cpp
          persistent.cpp
  PRIVATE FILE_SET
          HEADERS
          FILES
          ad/ad_actor.h
          ad/ad_entity.h
          ad/ad_game.h
          ad/ad_inventory.h
          ad/ad_inventory_box.h
          ad/ad_item.h
          ad/ad_layer.h
          ad/ad_node_state.h
          ad/ad_object.h
          ad/ad_path.h
          ad/ad_path_point.h
          ad/ad_region.h
          ad/ad_response.h
          ad/ad_response_box.h
          ad/ad_response_context.h
          ad/ad_rot_level.h
          ad/ad_scale_level.h
          ad/ad_scene.h
          ad/ad_scene_node.h
          ad/ad_scene_state.h
          ad/ad_sentence.h
          ad/ad_sprite_set.h
          ad/ad_talk_def.h
          ad/ad_talk_holder.h
          ad/ad_talk_node.h
          ad/ad_waypoint_group.h
          base/scriptables/debuggable/debuggable_script.h
          base/scriptables/debuggable/debuggable_script_engine.h
          base/scriptables/script.h
          base/scriptables/script_engine.h
          base/scriptables/script_stack.h
          base/scriptables/script_value.h
          base/scriptables/script_ext_array.h
          base/scriptables/script_ext_date.h
          base/scriptables/script_ext_directory.h
          base/scriptables/script_ext_file.h
          base/scriptables/script_ext_math.h
          base/scriptables/script_ext_object.h
          base/scriptables/script_ext_mem_buffer.h
          base/scriptables/script_ext_string.h
          base/file/base_disk_file.h
          base/file/base_file_entry.h
          base/file/base_package.h
          base/file/base_save_thumb_file.h
          base/file/base_savefile_manager_file.h
          base/font/base_font_bitmap.h
          base/font/base_font_truetype.h
          base/font/base_font.h
          base/font/base_font_storage.h
          base/gfx/base_image.h
          base/gfx/base_renderer.h
          base/gfx/base_surface.h
          base/gfx/osystem/base_surface_osystem.h
          base/gfx/osystem/base_render_osystem.h
          base/gfx/osystem/render_ticket.h
          base/gfx/xmath.h
          base/particles/part_particle.h
          base/particles/part_emitter.h
          base/particles/part_force.h
          base/sound/base_sound.h
          base/sound/base_sound_buffer.h
          base/sound/base_sound_manager.h
          base/base.h
          base/base_access_mgr.h
          base/base_active_rect.h
          base/base_dynamic_buffer.h
          base/base_engine.h
          base/base_fader.h
          base/base_file_manager.h
          base/base_frame.h
          base/base_game.h
          base/base_keyboard_state.h
          base/base_named_object.h
          base/base_object.h
          base/base_parser.h
          base/base_persistence_manager.h
          base/base_point.h
          base/base_quick_msg.h
          base/base_region.h
          base/base_scriptable.h
          base/base_script_holder.h
          base/base_sprite.h
          base/base_string_table.h
          base/base_sub_frame.h
          base/base_surface_storage.h
          base/base_transition_manager.h
          base/base_viewport.h
          base/save_thumb_helper.h
          ext/wme_3fstatistics.h
          ext/wme_commandlinehelper.h
          ext/wme_displacement.h
          ext/wme_galaxy.h
          ext/wme_steam.h
          ext/wme_windowmode.h
          debugger/breakpoint.h
          debugger/debugger_controller.h
          debugger/error.h
          debugger/listing_providers/blank_listing.h
          debugger/listing_providers/blank_listing_provider.h
          debugger/listing_providers/basic_source_listing_provider.h
          debugger/listing_providers/cached_source_listing_provider.h
          debugger/listing_providers/source_listing.h
          debugger/listing.h
          debugger/script_monitor.h
          debugger/watch.h
          debugger/watch_instance.h
          math/math_util.h
          platform_osystem.h
          system/sys_class.h
          system/sys_class_registry.h
          system/sys_instance.h
          ui/ui_button.h
          ui/ui_edit.h
          ui/ui_entity.h
          ui/ui_object.h
          ui/ui_text.h
          ui/ui_tiled_image.h
          ui/ui_window.h
          utils/crc.h
          utils/path_util.h
          utils/string_util.h
          utils/utils.h
          video/subtitle_card.h
          video/video_player.h
          video/video_subtitler.h
          video/video_theora_player.h
          debugger.h
          wintermute.h
          persistent.h
)

if(ENABLE_WME3D)
  target_sources(
    wintermute
    PRIVATE ad/ad_actor_3dx.cpp
            ad/ad_attach_3dx.cpp
            ad/ad_block.cpp
            ad/ad_generic.cpp
            ad/ad_geom_ext.cpp
            ad/ad_geom_ext_node.cpp
            ad/ad_object_3d.cpp
            ad/ad_path3d.cpp
            ad/ad_path_point3d.cpp
            ad/ad_scene_geometry.cpp
            ad/ad_walkplane.cpp
            ad/ad_waypoint_group3d.cpp
            base/base_animation_transition_time.cpp
            base/gfx/3dcamera.cpp
            base/gfx/3dlight.cpp
            base/gfx/3deffect.cpp
            base/gfx/3deffect_params.cpp
            base/gfx/3dface.cpp
            base/gfx/3dloader_3ds.cpp
            base/gfx/3dmesh.cpp
            base/gfx/3dshadow_volume.cpp
            base/gfx/3dutils.cpp
            base/gfx/3dvertex.cpp
            base/gfx/base_renderer3d.cpp
            base/gfx/skin_mesh_helper.cpp
            base/gfx/xactive_animation.cpp
            base/gfx/xanimation.cpp
            base/gfx/xanimation_channel.cpp
            base/gfx/xanimation_set.cpp
            base/gfx/xfile.cpp
            base/gfx/xfile_loader.cpp
            base/gfx/xframe_node.cpp
            base/gfx/xmaterial.cpp
            base/gfx/xmesh.cpp
            base/gfx/xmodel.cpp
            base/gfx/xskinmesh.cpp
            base/gfx/opengl/base_surface_opengl3d.cpp
            base/gfx/opengl/base_render_opengl3d.cpp
            base/gfx/opengl/base_render_opengl3d_shader.cpp
            base/gfx/opengl/meshx_opengl.cpp
            base/gfx/opengl/meshx_opengl_shader.cpp
            base/gfx/opengl/mesh3ds_opengl.cpp
            base/gfx/opengl/mesh3ds_opengl_shader.cpp
            base/gfx/opengl/shadow_volume_opengl.cpp
            base/gfx/opengl/shadow_volume_opengl_shader.cpp
            ext/wme_blackandwhite.cpp
            ext/wme_shadowmanager.cpp
            ext/wme_vlink.cpp
    PRIVATE FILE_SET
            HEADERS
            FILES
            ad/ad_actor_3dx.h
            ad/ad_attach_3dx.h
            ad/ad_block.h
            ad/ad_generic.h
            ad/ad_geom_ext.h
            ad/ad_geom_ext_node.h
            ad/ad_object_3d.h
            ad/ad_path3d.h
            ad/ad_path_point3d.h
            ad/ad_scene_geometry.h
            ad/ad_walkplane.h
            ad/ad_waypoint_group3d.h
            base/base_animation_transition_time.h
            base/gfx/3dcamera.h
            base/gfx/3dlight.h
            base/gfx/3deffect.h
            base/gfx/3deffect_params.h
            base/gfx/3dface.h
            base/gfx/3dloader_3ds.h
            base/gfx/3dmesh.h
            base/gfx/3dshadow_volume.h
            base/gfx/3dutils.h
            base/gfx/3dvertex.h
            base/gfx/base_renderer3d.h
            base/gfx/skin_mesh_helper.h
            base/gfx/xactive_animation.h
            base/gfx/xanimation.h
            base/gfx/xanimation_channel.h
            base/gfx/xanimation_set.h
            base/gfx/xfile.h
            base/gfx/xfile_loader.h
            base/gfx/xframe_node.h
            base/gfx/xmaterial.h
            base/gfx/xmesh.h
            base/gfx/xmodel.h
            base/gfx/xskinmesh.h
            base/gfx/opengl/base_surface_opengl3d.h
            base/gfx/opengl/base_render_opengl3d.h
            base/gfx/opengl/base_render_opengl3d_shader.h
            base/gfx/opengl/meshx_opengl.h
            base/gfx/opengl/meshx_opengl_shader.h
            base/gfx/opengl/mesh3ds_opengl.h
            base/gfx/opengl/mesh3ds_opengl_shader.h
            base/gfx/opengl/shadow_volume_opengl.h
            base/gfx/opengl/shadow_volume_opengl_shader.h
            ext/wme_blackandwhite.h
            ext/wme_shadowmanager.h
            ext/wme_vlink.h
  )

  if(USE_TINYGL)
    target_sources(
      wintermute
      PRIVATE base/gfx/tinygl/base_render_tinygl.cpp
              base/gfx/tinygl/base_surface_tinygl.cpp
              base/gfx/tinygl/mesh3ds_tinygl.cpp
              base/gfx/tinygl/meshx_tinygl.cpp
              base/gfx/tinygl/shadow_volume_tinygl.cpp
      PRIVATE FILE_SET
              HEADERS
              FILES
              base/gfx/tinygl/base_render_tinygl.h
              base/gfx/tinygl/base_surface_tinygl.h
              base/gfx/tinygl/mesh3ds_tinygl.h
              base/gfx/tinygl/meshx_tinygl.h
              base/gfx/tinygl/shadow_volume_tinygl.h
    )

  endif()

endif()

add_library(wintermute_detection)

target_sources(wintermute_detection PRIVATE detection.cpp)
