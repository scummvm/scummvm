NOTES
-------
- The game is completable with revision 20 with some minor glitches (see BUGS).


TODO
------
- Add music support (game seems to use XMIDI, MIDI and headerless music...figure out more)
- When saving a game, save the whole screen when an animation is playing
   e.g. when playing animations (the script controlled ones, not the movies) it should save
   the whole screen when the game is saved when such an animation is running since it uses
   delta-frames so currently, once restored, the screen is wrong. This is only observed in
   a few places.
- Add "Quit game" functionality to the menu
- Flush the resource cache when changing rooms, otherwise the game will keep eating up memory

BUGS
------
- Crashes sometimes on scene changes
  (I guess because some talktext is still running although the slot used by it has changed)
- Crashes sometimes (e.g. when inside the barn and going up the ladder)

DONE
------
- Implement dirty rectangles (low priority)
- Optimize segment mask redrawing (only redraw what's neccessary)
- Add movie playback functionality (movie format is known, needs implementing)
- Add sound support (after rewrite of the resource system)
- Still some clipping issues (walking upstairs in the saloon, when on top of the tower in the hideout)
- Add game menu
  - Rewrite from scratch with only minor stuff from the disasm since the original menu is one huge
	messy function
- Rewrite the resource system to something similar as used by M4
  - each resource type gets its own class, the resource cache manages the resource instances
  - generic resource class which has a method that creates a MemoryReadStream
  - rewrite parts of the engine to use the new resource system
- Extend savegame format (savegame version, description, more data)