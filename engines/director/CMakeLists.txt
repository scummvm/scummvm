add_library(director STATIC)

target_sources(
  director
  PRIVATE archive.cpp
          archive-save.cpp
          cast.cpp
          channel.cpp
          cursor.cpp
          debugger.cpp
          director.cpp
          events.cpp
          fonts.cpp
          frame.cpp
          game-quirks.cpp
          graphics.cpp
          images.cpp
          metaengine.cpp
          movie.cpp
          picture.cpp
          resource.cpp
          rte.cpp
          score.cpp
          sound.cpp
          sprite.cpp
          stxt.cpp
          tests.cpp
          transitions.cpp
          types.cpp
          util.cpp
          window.cpp
          castmember/castmember.cpp
          castmember/bitmap.cpp
          castmember/digitalvideo.cpp
          castmember/filmloop.cpp
          castmember/movie.cpp
          castmember/palette.cpp
          castmember/richtext.cpp
          castmember/script.cpp
          castmember/shape.cpp
          castmember/sound.cpp
          castmember/text.cpp
          castmember/transition.cpp
          castmember/xtra.cpp
          lingo/lingo.cpp
          lingo/lingo-builtins.cpp
          lingo/lingo-bytecode.cpp
          lingo/lingo-code.cpp
          lingo/lingo-codegen.cpp
          lingo/lingo-events.cpp
          lingo/lingo-funcs.cpp
          lingo/lingo-gr.cpp
          lingo/lingo-lex.cpp
          lingo/lingo-mci.cpp
          lingo/lingo-object.cpp
          lingo/lingo-patcher.cpp
          lingo/lingo-preprocessor.cpp
          lingo/lingo-the.cpp
          lingo/lingo-utils.cpp
          lingo/lingodec/ast.cpp
          lingo/lingodec/context.cpp
          lingo/lingodec/codewritervisitor.cpp
          lingo/lingodec/handler.cpp
          lingo/lingodec/names.cpp
          lingo/lingodec/script.cpp
          lingo/xlibs/a/aiff.cpp
          lingo/xlibs/a/applecdxobj.cpp
          lingo/xlibs/a/askuser.cpp
          lingo/xlibs/b/backdrop.cpp
          lingo/xlibs/b/barakeobj.cpp
          lingo/xlibs/b/batqt.cpp
          lingo/xlibs/b/bimxobj.cpp
          lingo/xlibs/b/blitpict.cpp
          lingo/xlibs/c/cdromxobj.cpp
          lingo/xlibs/c/closebleedwindowxcmd.cpp
          lingo/xlibs/c/colorxobj.cpp
          lingo/xlibs/c/colorcursorxobj.cpp
          lingo/xlibs/c/consumer.cpp
          lingo/xlibs/c/cursorxobj.cpp
          lingo/xlibs/d/darkenscreen.cpp
          lingo/xlibs/d/dateutil.cpp
          lingo/xlibs/d/developerStack.cpp
          lingo/xlibs/d/dialogsxobj.cpp
          lingo/xlibs/d/dirutil.cpp
          lingo/xlibs/d/dllglue.cpp
          lingo/xlibs/d/dpwavi.cpp
          lingo/xlibs/d/dpwqtw.cpp
          lingo/xlibs/d/draw.cpp
          lingo/xlibs/e/ednox.cpp
          lingo/xlibs/e/eventq.cpp
          lingo/xlibs/f/fadegammadownxcmd.cpp
          lingo/xlibs/f/fadegammaupxcmd.cpp
          lingo/xlibs/f/fadegammaxcmd.cpp
          lingo/xlibs/f/fedracul.cpp
          lingo/xlibs/f/feimasks.cpp
          lingo/xlibs/f/feiprefs.cpp
          lingo/xlibs/f/fileexists.cpp
          lingo/xlibs/f/fileio.cpp
          lingo/xlibs/f/findereventsxcmd.cpp
          lingo/xlibs/f/findfolder.cpp
          lingo/xlibs/f/findsys.cpp
          lingo/xlibs/f/findwin.cpp
          lingo/xlibs/f/flushxobj.cpp
          lingo/xlibs/f/fplayxobj.cpp
          lingo/xlibs/f/fsutil.cpp
          lingo/xlibs/g/genutils.cpp
          lingo/xlibs/g/getscreenrectsxfcn.cpp
          lingo/xlibs/g/getscreensizexfcn.cpp
          lingo/xlibs/g/getsoundinlevel.cpp
          lingo/xlibs/g/gpid.cpp
          lingo/xlibs/h/henry.cpp
          lingo/xlibs/h/hitmap.cpp
          lingo/xlibs/i/inixobj.cpp
          lingo/xlibs/i/instobj.cpp
          lingo/xlibs/i/iscd.cpp
          lingo/xlibs/i/ispippin.cpp
          lingo/xlibs/j/jitdraw3.cpp
          lingo/xlibs/j/jwxini.cpp
          lingo/xlibs/l/labeldrvxobj.cpp
          lingo/xlibs/l/listdev.cpp
          lingo/xlibs/m/maniacbg.cpp
          lingo/xlibs/m/mapnavigatorxobj.cpp
          lingo/xlibs/m/memcheckxobj.cpp
          lingo/xlibs/m/memoryxobj.cpp
          lingo/xlibs/m/misc.cpp
          lingo/xlibs/m/miscx.cpp
          lingo/xlibs/m/mmaskxobj.cpp
          lingo/xlibs/m/mmovie.cpp
          lingo/xlibs/m/moovxobj.cpp
          lingo/xlibs/m/movemousejp.cpp
          lingo/xlibs/m/movemousexobj.cpp
          lingo/xlibs/m/movieidxxobj.cpp
          lingo/xlibs/m/movutils.cpp
          lingo/xlibs/m/msfile.cpp
          lingo/xlibs/m/mystisle.cpp
          lingo/xlibs/o/openbleedwindowxcmd.cpp
          lingo/xlibs/o/orthoplayxobj.cpp
          lingo/xlibs/p/paco.cpp
          lingo/xlibs/p/palxobj.cpp
          lingo/xlibs/p/panel.cpp
          lingo/xlibs/p/pharaohs.cpp
          lingo/xlibs/p/popupmenuxobj.cpp
          lingo/xlibs/p/porta.cpp
          lingo/xlibs/p/prefpath.cpp
          lingo/xlibs/p/printomatic.cpp
          lingo/xlibs/p/processxobj.cpp
          lingo/xlibs/p/putcurs.cpp
          lingo/xlibs/q/qtcatmovieplayerxobj.cpp
          lingo/xlibs/q/qtmovie.cpp
          lingo/xlibs/q/qtvr.cpp
          lingo/xlibs/q/quicktime.cpp
          lingo/xlibs/r/registercomponent.cpp
          lingo/xlibs/r/remixxcmd.cpp
          lingo/xlibs/s/serialportxobj.cpp
          lingo/xlibs/s/smallutil.cpp
          lingo/xlibs/s/soundjam.cpp
          lingo/xlibs/s/spacemgr.cpp
          lingo/xlibs/s/stagetc.cpp
          lingo/xlibs/s/syscolor.cpp
          lingo/xlibs/t/tengu.cpp
          lingo/xlibs/u/unittest.cpp
          lingo/xlibs/v/valkyrie.cpp
          lingo/xlibs/v/versions.cpp
          lingo/xlibs/v/videodiscxobj.cpp
          lingo/xlibs/v/vmisonxfcn.cpp
          lingo/xlibs/v/vmpresent.cpp
          lingo/xlibs/v/volumelist.cpp
          lingo/xlibs/v/voyagerxsound.cpp
          lingo/xlibs/w/widgetxobj.cpp
          lingo/xlibs/w/window.cpp
          lingo/xlibs/w/winxobj.cpp
          lingo/xlibs/w/wininfo.cpp
          lingo/xlibs/x/xcmdglue.cpp
          lingo/xlibs/x/xio.cpp
          lingo/xlibs/x/xplayanim.cpp
          lingo/xlibs/x/xplaypacoxfcn.cpp
          lingo/xlibs/x/xsoundxfcn.cpp
          lingo/xlibs/x/xwin.cpp
          lingo/xlibs/y/yasix.cpp
          lingo/xtras/b/budapi.cpp
          lingo/xtras/a/audio.cpp
          lingo/xtras/directsound.cpp
          lingo/xtras/d/displayres.cpp
          lingo/xtras/filextra.cpp
          lingo/xtras/keypoll.cpp
          lingo/xtras/masterapp.cpp
          lingo/xtras/m/mui.cpp
          lingo/xtras/openurl.cpp
          lingo/xtras/oscheck.cpp
          lingo/xtras/qtvrxtra.cpp
          lingo/xtras/r/registryreader.cpp
          lingo/xtras/rtk.cpp
          lingo/xtras/scrnutil.cpp
          lingo/xtras/s/smacker.cpp
          lingo/xtras/s/staytoonedhall.cpp
          lingo/xtras/s/staytoonedball.cpp
          lingo/xtras/s/staytoonedglop.cpp
          lingo/xtras/s/staytoonedhigh.cpp
          lingo/xtras/s/staytoonedober.cpp
          lingo/xtras/s/staytoonedtoon.cpp
          lingo/xtras/timextra.cpp
          lingo/xtras/xsound.cpp
  PRIVATE FILE_SET
          HEADERS
          FILES
          archive.h
          cast.h
          channel.h
          cursor.h
          debugger.h
          director.h
          frame.h
          images.h
          movie.h
          picture.h
          rte.h
          score.h
          sound.h
          sprite.h
          stxt.h
          types.h
          util.h
          window.h
          castmember/castmember.h
          castmember/bitmap.h
          castmember/digitalvideo.h
          castmember/filmloop.h
          castmember/movie.h
          castmember/palette.h
          castmember/richtext.h
          castmember/script.h
          castmember/shape.h
          castmember/sound.h
          castmember/text.h
          castmember/transition.h
          castmember/xtra.h
          lingo/lingo.h
          lingo/lingo-builtins.h
          lingo/lingo-bytecode.h
          lingo/lingo-code.h
          lingo/lingo-codegen.h
          lingo/lingo-gr.h
          lingo/lingo-object.h
          lingo/lingo-the.h
          lingo/lingo-utils.h
          lingo/lingodec/ast.h
          lingo/lingodec/context.h
          lingo/lingodec/codewritervisitor.h
          lingo/lingodec/handler.h
          lingo/lingodec/names.h
          lingo/lingodec/script.h
          lingo/xlibs/a/aiff.h
          lingo/xlibs/a/applecdxobj.h
          lingo/xlibs/a/askuser.h
          lingo/xlibs/b/backdrop.h
          lingo/xlibs/b/barakeobj.h
          lingo/xlibs/b/batqt.h
          lingo/xlibs/b/bimxobj.h
          lingo/xlibs/b/blitpict.h
          lingo/xlibs/c/cdromxobj.h
          lingo/xlibs/c/closebleedwindowxcmd.h
          lingo/xlibs/c/colorxobj.h
          lingo/xlibs/c/colorcursorxobj.h
          lingo/xlibs/c/consumer.h
          lingo/xlibs/c/cursorxobj.h
          lingo/xlibs/d/darkenscreen.h
          lingo/xlibs/d/dateutil.h
          lingo/xlibs/d/developerStack.h
          lingo/xlibs/d/dialogsxobj.h
          lingo/xlibs/d/dirutil.h
          lingo/xlibs/d/dllglue.h
          lingo/xlibs/d/dpwavi.h
          lingo/xlibs/d/dpwqtw.h
          lingo/xlibs/d/draw.h
          lingo/xlibs/e/ednox.h
          lingo/xlibs/e/eventq.h
          lingo/xlibs/f/fadegammadownxcmd.h
          lingo/xlibs/f/fadegammaupxcmd.h
          lingo/xlibs/f/fadegammaxcmd.h
          lingo/xlibs/f/fedracul.h
          lingo/xlibs/f/feimasks.h
          lingo/xlibs/f/feiprefs.h
          lingo/xlibs/f/fileexists.h
          lingo/xlibs/f/fileio.h
          lingo/xlibs/f/findereventsxcmd.h
          lingo/xlibs/f/findfolder.h
          lingo/xlibs/f/findsys.h
          lingo/xlibs/f/findwin.h
          lingo/xlibs/f/flushxobj.h
          lingo/xlibs/f/fplayxobj.h
          lingo/xlibs/f/fsutil.h
          lingo/xlibs/g/genutils.h
          lingo/xlibs/g/getscreenrectsxfcn.h
          lingo/xlibs/g/getscreensizexfcn.h
          lingo/xlibs/g/getsoundinlevel.h
          lingo/xlibs/g/gpid.h
          lingo/xlibs/h/henry.h
          lingo/xlibs/h/hitmap.h
          lingo/xlibs/i/inixobj.h
          lingo/xlibs/i/instobj.h
          lingo/xlibs/i/iscd.h
          lingo/xlibs/i/ispippin.h
          lingo/xlibs/j/jitdraw3.h
          lingo/xlibs/j/jwxini.h
          lingo/xlibs/l/labeldrvxobj.h
          lingo/xlibs/l/listdev.h
          lingo/xlibs/m/maniacbg.h
          lingo/xlibs/m/mapnavigatorxobj.h
          lingo/xlibs/m/memcheckxobj.h
          lingo/xlibs/m/memoryxobj.h
          lingo/xlibs/m/misc.h
          lingo/xlibs/m/miscx.h
          lingo/xlibs/m/mmaskxobj.h
          lingo/xlibs/m/mmovie.h
          lingo/xlibs/m/moovxobj.h
          lingo/xlibs/m/movemousejp.h
          lingo/xlibs/m/movemousexobj.h
          lingo/xlibs/m/movieidxxobj.h
          lingo/xlibs/m/movutils.h
          lingo/xlibs/m/msfile.h
          lingo/xlibs/m/mystisle.h
          lingo/xlibs/o/openbleedwindowxcmd.h
          lingo/xlibs/o/orthoplayxobj.h
          lingo/xlibs/p/paco.h
          lingo/xlibs/p/palxobj.h
          lingo/xlibs/p/panel.h
          lingo/xlibs/p/pharaohs.h
          lingo/xlibs/p/popupmenuxobj.h
          lingo/xlibs/p/porta.h
          lingo/xlibs/p/prefpath.h
          lingo/xlibs/p/printomatic.h
          lingo/xlibs/p/processxobj.h
          lingo/xlibs/p/putcurs.h
          lingo/xlibs/q/qtcatmovieplayerxobj.h
          lingo/xlibs/q/qtmovie.h
          lingo/xlibs/q/qtvr.h
          lingo/xlibs/q/quicktime.h
          lingo/xlibs/r/registercomponent.h
          lingo/xlibs/r/remixxcmd.h
          lingo/xlibs/s/serialportxobj.h
          lingo/xlibs/s/smallutil.h
          lingo/xlibs/s/soundjam.h
          lingo/xlibs/s/spacemgr.h
          lingo/xlibs/s/stagetc.h
          lingo/xlibs/s/syscolor.h
          lingo/xlibs/t/tengu.h
          lingo/xlibs/u/unittest.h
          lingo/xlibs/v/valkyrie.h
          lingo/xlibs/v/versions.h
          lingo/xlibs/v/videodiscxobj.h
          lingo/xlibs/v/vmisonxfcn.h
          lingo/xlibs/v/vmpresent.h
          lingo/xlibs/v/volumelist.h
          lingo/xlibs/v/voyagerxsound.h
          lingo/xlibs/w/widgetxobj.h
          lingo/xlibs/w/window.h
          lingo/xlibs/w/winxobj.h
          lingo/xlibs/w/wininfo.h
          lingo/xlibs/x/xcmdglue.h
          lingo/xlibs/x/xio.h
          lingo/xlibs/x/xplayanim.h
          lingo/xlibs/x/xplaypacoxfcn.h
          lingo/xlibs/x/xsoundxfcn.h
          lingo/xlibs/x/xwin.h
          lingo/xlibs/y/yasix.h
          lingo/xtras/b/budapi.h
          lingo/xtras/a/audio.h
          lingo/xtras/directsound.h
          lingo/xtras/d/displayres.h
          lingo/xtras/filextra.h
          lingo/xtras/keypoll.h
          lingo/xtras/masterapp.h
          lingo/xtras/m/mui.h
          lingo/xtras/openurl.h
          lingo/xtras/oscheck.h
          lingo/xtras/qtvrxtra.h
          lingo/xtras/r/registryreader.h
          lingo/xtras/rtk.h
          lingo/xtras/scrnutil.h
          lingo/xtras/s/smacker.h
          lingo/xtras/s/staytoonedhall.h
          lingo/xtras/s/staytoonedball.h
          lingo/xtras/s/staytoonedglop.h
          lingo/xtras/s/staytoonedhigh.h
          lingo/xtras/s/staytoonedober.h
          lingo/xtras/s/staytoonedtoon.h
          lingo/xtras/timextra.h
          lingo/xtras/xsound.h
)

if(USE_IMGUI)
  target_sources(
    director
    PRIVATE debugger/debugtools.cpp
            debugger/dt-cast.cpp
            debugger/dt-controlpanel.cpp
            debugger/dt-lists.cpp
            debugger/dt-save-state.cpp
            debugger/dt-score.cpp
            debugger/dt-script-d2.cpp
            debugger/dt-script-d4.cpp
            debugger/dt-scripts.cpp
    PRIVATE FILE_SET
            HEADERS
            FILES
            debugger/debugtools.h
  )

endif()

# HACK: Skip this when including the file for detection objects.
if("$(LOAD_RULES_MK)" STREQUAL "1")
  # `brew --prefix flex`/bin/flex engines/director/lingo/lingo-lex.l `brew --prefix bison`/bin/bison
  # -dv engines/director/lingo/lingo-gr.y
endif()

add_library(director_detection)

target_sources(director_detection PRIVATE detection.cpp)
